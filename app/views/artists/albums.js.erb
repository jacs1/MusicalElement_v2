<%# binding.pry %>
// $(".tab-content").find(".active").removeClass('active')
// $(".tab-content").find("#Albums").addClass('active')
$("#Albums").html("<%= escape_javascript(render(:partial => 'albums')) %>");
  $('.btn-group-hover').hide()
  $('tr').on({
  mouseenter: function(){
    $(this)
      .find('.btn-group-hover').stop().fadeTo('fast',1)
      .find('.icon-white').addClass('icon-white-temp').removeClass('icon-white');
  },
  mouseleave: function(){
    $(this)
      .find('.btn-group-hover').stop().fadeTo('fast',0);
  }
});

  $('.btn-group-hover').on({
  mouseenter: function(){
    $(this).removeClass('btn-group-hover')
      .find('.icon-white-temp').addClass('icon-white');
  },
  mouseleave: function(){
    $(this).addClass('btn-group-hover')
      .find('.icon-white').addClass('icon-white-temp').removeClass('icon-white');
  }
});

  $('.btn').click(function() {
     var className = $(this).attr('class');
     _this = $(this);
     switch(className){
      case 'btn btn-mini icon-play':
      playing_track();
      break;
      case 'btn btn-mini icon-pause':
      paused_track();
      break
      case 'btn btn-mini icon-volume-up':
      volume_track();
      break
      case 'btn btn-mini icon-trash':
      delete_track();
      break
     }
     

     
  });

    function playing_track() {
      console.log('change to paused icon....');
      _this.removeClass('btn btn-mini icon-play');
      _this.addClass('btn btn-mini icon-pause');
      $("<tr>").insertAfter($(_this).parents("tr").eq(0)).attr('id', "cur_pl_tr");
      $("#cur_pl_tr").append('<div style="position: absolute;width: 58%;" class="progress progress-small progress-striped active"><div class="bar" style="width: 0%;"></div></div>');


       var playing = _this.parent();

       soundManager.createSound({
         id: 'mySound-' + playing.data("id"),
         url: playing.data("url"),
         autoLoad: true,
         autoPlay: false,
         onfinish: function() {
          $("#cur_pl_tr").fadeOut('slow', function() {$(this).remove()});
          $('#time').children().fadeOut('slow', function() {$(this).remove()});
             paused_track();
           },
         onload: function() {
           // alert('The sound '+this.id+' loaded!');
         },
         whileplaying: function() {
           var track_time = $('#time').html();
           var seconds = Math.round(this.position/1000);
           var r = seconds % 60;
           var m = Math.floor(seconds / 60);
           var duration = (m < 10 ? '0' + m : m) + ":" + (r < 10 ? '0' + r : r);
           $(".progress").first().find('.bar').width(((this.position/this.duration) * 100) + '%');
           // $('#time').html('<p>' + duration + '</p>');
           // $('#time').find('.duration').fadeTo('slow',2).html(" / " + duration)
           _this.closest('td').prev().prev().find('.duration').fadeIn('slow',2).html(" / " + duration)
           $("<tr>").insertAfter($(this).parents("tr").eq(0))
         },
         volume: 50
       });
         soundManager.play('mySound-'+playing.data("id"));

    }

    function paused_track() {
      var currently_playing = _this.parent();
      console.log('change to playing icon....');
      _this.removeClass('btn btn-mini icon-pause');
      _this.addClass('btn btn-mini icon-play');
      soundManager.pause('mySound-'+currently_playing.data("id"));
    }

    function volume_track() {
      var currently_playing = _this.parent();
      console.log('clicked volume icon....');
    }

    function delete_track() {
      var currently_playing = _this.parent();
      console.log('clicked delete icon....');
    }
